<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=../rate-controllers/ rel=prev><link href=../caliper-messengers/ rel=next><link rel=icon href=../../assets/favicon.png><meta name=generator content="mkdocs-1.6.0, mkdocs-material-9.5.28"><title>Resource and Transaction Monitors - Hyperledger Caliper</title><link rel=stylesheet href=../../assets/stylesheets/main.6543a935.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config",""),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#overview class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Hyperledger Caliper" class="md-header__button md-logo" aria-label="Hyperledger Caliper" data-md-component=logo> <img src=../../_static/caliper.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Hyperledger Caliper </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Resource and Transaction Monitors </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12c0-2.42-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg> </label> </form> <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hyperledger/caliper title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> hyperledger/caliper </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> Introduction </a> </li> <li class=md-tabs__item> <a href=../../overview/installing-caliper/ class=md-tabs__link> Overview </a> </li> <li class=md-tabs__item> <a href=../../connector-configuration/ethereum-config/ class=md-tabs__link> Ethereum Configuration </a> </li> <li class=md-tabs__item> <a href=../../connector-configuration/fabric-config/ class=md-tabs__link> Fabric Configuration </a> </li> <li class=md-tabs__item> <a href=../../connector-configuration/fisco-config/ class=md-tabs__link> FISCO BCOS Configuration </a> </li> <li class=md-tabs__item> <a href=../../fabric-tutorial/ class=md-tabs__link> Tutorials </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../writing-connectors/ class=md-tabs__link> Reference </a> </li> <li class=md-tabs__item> <a href=../../general/contributing/ class=md-tabs__link> General </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Hyperledger Caliper" class="md-nav__button md-logo" aria-label="Hyperledger Caliper" data-md-component=logo> <img src=../../_static/caliper.svg alt=logo> </a> Hyperledger Caliper </label> <div class=md-nav__source> <a href=https://github.com/hyperledger/caliper title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> hyperledger/caliper </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Overview </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Overview </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../overview/installing-caliper/ class=md-nav__link> <span class=md-ellipsis> Installing and Running Caliper </span> </a> </li> <li class=md-nav__item> <a href=../../overview/bench-config/ class=md-nav__link> <span class=md-ellipsis> Benchmark Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../overview/workload-module/ class=md-nav__link> <span class=md-ellipsis> Workload Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../overview/architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../connector-configuration/ethereum-config/ class=md-nav__link> <span class=md-ellipsis> Ethereum Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../connector-configuration/fabric-config/ class=md-nav__link> <span class=md-ellipsis> Fabric Configuration </span> </a> </li> <li class=md-nav__item> <a href=../../connector-configuration/fisco-config/ class=md-nav__link> <span class=md-ellipsis> FISCO BCOS Configuration </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <div class="md-nav__link md-nav__container"> <a href=../../fabric-tutorial/ class="md-nav__link "> <span class=md-ellipsis> Tutorials </span> </a> <label class="md-nav__link " for=__nav_6 id=__nav_6_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../fabric-tutorial/tutorials-fabric-existing/ class=md-nav__link> <span class=md-ellipsis> Existing Fabric Tutorials </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7 checked> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=true> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../writing-connectors/ class=md-nav__link> <span class=md-ellipsis> Writing Connectors </span> </a> </li> <li class=md-nav__item> <a href=../runtime-config/ class=md-nav__link> <span class=md-ellipsis> Runtime Configuration </span> </a> </li> <li class=md-nav__item> <a href=../declarative-workload-module/ class=md-nav__link> <span class=md-ellipsis> Declarative Workloads </span> </a> </li> <li class=md-nav__item> <a href=../rate-controllers/ class=md-nav__link> <span class=md-ellipsis> Rate Controllers </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Resource and Transaction Monitors </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Resource and Transaction Monitors </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#resource class=md-nav__link> <span class=md-ellipsis> Resource </span> </a> <nav class=md-nav aria-label=Resource> <ul class=md-nav__list> <li class=md-nav__item> <a href=#process-monitor class=md-nav__link> <span class=md-ellipsis> Process Monitor </span> </a> </li> <li class=md-nav__item> <a href=#docker-monitor class=md-nav__link> <span class=md-ellipsis> Docker Monitor </span> </a> </li> <li class=md-nav__item> <a href=#prometheus-monitor class=md-nav__link> <span class=md-ellipsis> Prometheus Monitor </span> </a> <nav class=md-nav aria-label="Prometheus Monitor"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuring-the-prometheus-monitor class=md-nav__link> <span class=md-ellipsis> Configuring The Prometheus Monitor </span> </a> </li> <li class=md-nav__item> <a href=#basic-auth class=md-nav__link> <span class=md-ellipsis> Basic Auth </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#transaction class=md-nav__link> <span class=md-ellipsis> Transaction </span> </a> <nav class=md-nav aria-label=Transaction> <ul class=md-nav__list> <li class=md-nav__item> <a href=#logging class=md-nav__link> <span class=md-ellipsis> Logging </span> </a> </li> <li class=md-nav__item> <a href=#prometheus class=md-nav__link> <span class=md-ellipsis> Prometheus </span> </a> </li> <li class=md-nav__item> <a href=#prometheus-push-gateway class=md-nav__link> <span class=md-ellipsis> Prometheus Push Gateway </span> </a> <nav class=md-nav aria-label="Prometheus Push Gateway"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#basic-auth_1 class=md-nav__link> <span class=md-ellipsis> Basic Auth </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grafana-visualization class=md-nav__link> <span class=md-ellipsis> Grafana Visualization </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resource-charting class=md-nav__link> <span class=md-ellipsis> Resource Charting </span> </a> <nav class=md-nav aria-label="Resource Charting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#process-charting class=md-nav__link> <span class=md-ellipsis> Process Charting </span> </a> </li> <li class=md-nav__item> <a href=#docker-charting class=md-nav__link> <span class=md-ellipsis> Docker Charting </span> </a> </li> <li class=md-nav__item> <a href=#prometheus-charting class=md-nav__link> <span class=md-ellipsis> Prometheus Charting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../caliper-messengers/ class=md-nav__link> <span class=md-ellipsis> Messengers </span> </a> </li> <li class=md-nav__item> <a href=../benchmark-generators/ class=md-nav__link> <span class=md-ellipsis> Benchmark Generators </span> </a> </li> <li class=md-nav__item> <a href=../logging-control/ class=md-nav__link> <span class=md-ellipsis> Logging Control </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> General </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> General </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../general/contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> <li class=md-nav__item> <a href=../../general/faq/ class=md-nav__link> <span class=md-ellipsis> Caliper FAQ </span> </a> </li> <li class=md-nav__item> <a href=../../general/license/ class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#resource class=md-nav__link> <span class=md-ellipsis> Resource </span> </a> <nav class=md-nav aria-label=Resource> <ul class=md-nav__list> <li class=md-nav__item> <a href=#process-monitor class=md-nav__link> <span class=md-ellipsis> Process Monitor </span> </a> </li> <li class=md-nav__item> <a href=#docker-monitor class=md-nav__link> <span class=md-ellipsis> Docker Monitor </span> </a> </li> <li class=md-nav__item> <a href=#prometheus-monitor class=md-nav__link> <span class=md-ellipsis> Prometheus Monitor </span> </a> <nav class=md-nav aria-label="Prometheus Monitor"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuring-the-prometheus-monitor class=md-nav__link> <span class=md-ellipsis> Configuring The Prometheus Monitor </span> </a> </li> <li class=md-nav__item> <a href=#basic-auth class=md-nav__link> <span class=md-ellipsis> Basic Auth </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#transaction class=md-nav__link> <span class=md-ellipsis> Transaction </span> </a> <nav class=md-nav aria-label=Transaction> <ul class=md-nav__list> <li class=md-nav__item> <a href=#logging class=md-nav__link> <span class=md-ellipsis> Logging </span> </a> </li> <li class=md-nav__item> <a href=#prometheus class=md-nav__link> <span class=md-ellipsis> Prometheus </span> </a> </li> <li class=md-nav__item> <a href=#prometheus-push-gateway class=md-nav__link> <span class=md-ellipsis> Prometheus Push Gateway </span> </a> <nav class=md-nav aria-label="Prometheus Push Gateway"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#basic-auth_1 class=md-nav__link> <span class=md-ellipsis> Basic Auth </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#grafana-visualization class=md-nav__link> <span class=md-ellipsis> Grafana Visualization </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#resource-charting class=md-nav__link> <span class=md-ellipsis> Resource Charting </span> </a> <nav class=md-nav aria-label="Resource Charting"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#process-charting class=md-nav__link> <span class=md-ellipsis> Process Charting </span> </a> </li> <li class=md-nav__item> <a href=#docker-charting class=md-nav__link> <span class=md-ellipsis> Docker Charting </span> </a> </li> <li class=md-nav__item> <a href=#prometheus-charting class=md-nav__link> <span class=md-ellipsis> Prometheus Charting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#license class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>Resource and Transaction Monitors</h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>Caliper monitoring modules are used to collect resource utilization and transaction statistics during test execution, with the output being collated into the generated reports. Caliper monitors resources and transactions using:</p> <ul> <li>Resource monitors. Collect statistics on resource utilization during benchmarking, with monitoring reset between test rounds.</li> <li>Transaction monitors. Collect worker transaction statistics and provide conditional dispatch actions.</li> </ul> <h2 id=resource>Resource<a class=headerlink href=#resource title="Permanent link">&para;</a></h2> <p>The type of resource monitor to be used within a Caliper benchmark is declared in the <code>benchmark configuration file</code> through the specification one or more monitoring modules in an array under the label <code>monitors.resource</code>.</p> <p>Permitted monitors are:</p> <ul> <li><strong>Process</strong>: The <code>process</code> monitor enables monitoring of a named process on the host machine, and is most typically used to monitor the resources consumed by the running clients. This monitor will retrieve statistics on: [memory(max), memory(avg), CPU(max), CPU(avg), Network I/O, Disc I/O]</li> <li><strong>Docker</strong>: The <code>docker</code> monitor enables monitoring of specified Docker containers on the host or a remote machine, through using the Docker Remote API to retrieve container statistics. This monitor will retrieve statistics on: [memory(max), memory(avg), CPU(max), CPU(avg), Network I/O, Disc I/O]</li> <li><strong>Prometheus</strong>: The <code>prometheus</code> monitor enables the retrieval of data from Prometheus. This monitor will only report based on explicit user provided queries that are issued to Prometheus. If defined, the provision of a Prometheus server will cause Caliper to default to using the Prometheus PushGateway.</li> </ul> <p>Each declared resource monitoring module is accompanied with options required to configure each of the named monitors. A common option for some modules is <code>interval</code>, which is used to configure the refresh interval at which point resource utilization is measured by the monitor.</p> <h3 id=process-monitor>Process Monitor<a class=headerlink href=#process-monitor title="Permanent link">&para;</a></h3> <p>The process monitoring module options comprise:</p> <ul> <li>interval: monitor update interval in seconds</li> <li>processes: of an array of <code>[command, arguments, multiOutput]</code> key:value pairs.<ul> <li>command: names the parent process to monitor</li> <li>arguments: filters on the parent process being monitored</li> <li>multiOutput: enables handling of the discovery of multiple processes and may be one of:</li> <li>avg: take the average of process values discovered under <code>command/name</code></li> <li>sum: sum all process values discovered under <code>command/name</code></li> </ul> </li> </ul> <p>The following declares the monitoring of all local <code>node</code> processes that match <code>caliper.js</code>, with a 3 second update frequency, and the average of all discovered processes being taken.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>monitors:
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span>resource:
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>  </span>-<span class=w> </span>module:<span class=w> </span>process
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>    </span>options:
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>      </span>interval:<span class=w> </span><span class=m>3</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=w>      </span>processes:<span class=w> </span><span class=o>[{</span><span class=w> </span>command:<span class=w> </span><span class=s1>&#39;node&#39;</span>,<span class=w> </span>arguments:<span class=w> </span><span class=s1>&#39;caliper.js&#39;</span>,<span class=w> </span>multiOutput:<span class=w> </span><span class=s1>&#39;avg&#39;</span><span class=w> </span><span class=o>}]</span>
</span></code></pre></div> <h3 id=docker-monitor>Docker Monitor<a class=headerlink href=#docker-monitor title="Permanent link">&para;</a></h3> <p>The docker monitoring module options comprise:</p> <ul> <li>interval: monitor update interval in seconds</li> <li>cpuUsageNormalization: an optional boolean that may be used to convert the cpu usage in a more covenient value (scaled to 100) by normalising for the number of cores of the host machine, default is set to false</li> <li>containers: an array of container names that may relate to local or remote docker containers to be monitored. If all <strong>local</strong> docker containers are to be monitored, this may be achieved by providing <code>all</code> as a name</li> </ul> <p>The following declares the monitoring of two named docker containers; one local and the other remote, with a 5 second update frequency:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>monitors:
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>  </span>resource:
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>  </span>-<span class=w> </span>module:<span class=w> </span>docker
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>    </span>options:
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>      </span>interval:<span class=w> </span><span class=m>5</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>      </span>containers:
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>      </span>-<span class=w> </span>peer0.org1.example.com
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>      </span>-<span class=w> </span>http://192.168.1.100:2375/orderer.example.com
</span></code></pre></div> <p>The following declares the monitoring of all local docker containers, with a 5 second update frequency and normalization of the cpuUsage metric set to true.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a>monitors:
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>  </span>resource:
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>  </span>-<span class=w> </span>module:<span class=w> </span>docker
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span>options:
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>      </span>interval:<span class=w> </span><span class=m>5</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>      </span>cpuUsageNormalization:<span class=w> </span><span class=nb>true</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>      </span>containers:
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>      </span>-<span class=w> </span>all
</span></code></pre></div> <h3 id=prometheus-monitor>Prometheus Monitor<a class=headerlink href=#prometheus-monitor title="Permanent link">&para;</a></h3> <p><a href=https://prometheus.io/docs/introduction/overview/ >Prometheus</a> is an open-source systems monitoring and alerting toolkit that scrapes metrics from instrumented jobs, either directly or via an intermediary push gateway for short-lived jobs. It stores all scraped samples locally and runs rules over this data to either aggregate and record new time series from existing data or generate alerts. <a href=https://grafana.com/ >Grafana</a> or other API consumers can be used to visualize the collected data.</p> <p>All data stored on Prometheus may be queried by Caliper using the Prometheus query <a href=https://prometheus.io/docs/prometheus/latest/querying/api/ >HTTP API</a>. At a minimum this may be used to perform aggregate queries in order to report back the transaction statistics, though it is also possible to perform custom queries in order to report back information that has been scraped from other connected sources. Queries issued are intended to generate reports and so are expected to result in either a single value, or a vector that can be condensed into a single value through the application of a statistical routine. It is advisable to create required queries using Grafana to ensure correct operation before transferring the query into the monitor. Please see <a href=https://prometheus.io/docs/introduction/overview/ >Prometheus</a> and <a href=https://grafana.com/ >Grafana</a> documentation for more information.</p> <h4 id=configuring-the-prometheus-monitor>Configuring The Prometheus Monitor<a class=headerlink href=#configuring-the-prometheus-monitor title="Permanent link">&para;</a></h4> <p>The prometheus monitoring module options comprise:</p> <ul> <li>url: The Prometheus URL, used for direct queries</li> <li>metrics: The queries to be run for inclusion within the Caliper report, comprised of to keys: include and queries.<ul> <li><code>include</code> a string array that is used to determine metric inclusion through javascript regex. Any query results where the label of interest, as specified in the queries block, matches an item within the include list via regex, will be included in a generated report.</li> <li><code>queries</code> a series of blocks that describe the queries that are to be run at the end of each Caliper test.</li> </ul> </li> </ul> <p>The <code>queries</code> block is defined by:</p> <ul> <li>name: the metric name that the query relates to, used when building the report</li> <li>query: the query to be issued to the Prometheus server at the end of each test. Note that Caliper will add time bounding for the query so that only results pertaining to the test round are included.</li> <li>step: the timing step size to use within the range query</li> <li>label: a string to match on the returned query and used as a component identifier when populating the report</li> <li>statistic: if multiple values are returned, for instance if looking at a specific resource over a time range, the statistic will condense the values to a single result to enable reporting. Permitted options are:<ul> <li>avg: return the average from all values</li> <li>max: return the maximum from all values</li> <li>min: return the minimum from all values</li> <li>sum: return the summation of all values</li> <li>multiplier: An optional multiplier that may be used to convert exported metrics into a more convenient value (such as converting bytes to GB)</li> </ul> </li> </ul> <p>The following declares a Prometheus monitor that will run two bespoke queries between each test within the benchmark</p> <p><div class="language-sh highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a>monitors:
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>    </span>resource:
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span>-<span class=w> </span>module:<span class=w> </span>prometheus
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>      </span>options:
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>        </span>url:<span class=w> </span><span class=s2>&quot;http://localhost:9090&quot;</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>        </span>metrics:
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>            </span>include:<span class=w> </span><span class=o>[</span>dev-.*,<span class=w> </span>couch,<span class=w> </span>peer,<span class=w> </span>orderer<span class=o>]</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>            </span>queries:
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>                </span>-<span class=w> </span>name:<span class=w> </span>Endorse<span class=w> </span>Time<span class=w> </span><span class=o>(</span>s<span class=o>)</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=w>                  </span>query:<span class=w> </span>rate<span class=o>(</span>endorser_propsal_duration_sum<span class=o>{</span><span class=nv>chaincode</span><span class=o>=</span><span class=s2>&quot;marbles:v0&quot;</span><span class=o>}[</span>1m<span class=o>])</span>/rate<span class=o>(</span>endorser_propsal_duration_count<span class=o>{</span><span class=nv>chaincode</span><span class=o>=</span><span class=s2>&quot;marbles:v0&quot;</span><span class=o>}[</span>1m<span class=o>])</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=w>                  </span>step:<span class=w> </span><span class=m>1</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>                  </span>label:<span class=w> </span>instance
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=w>                  </span>statistic:<span class=w> </span>avg
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=w>                </span>-<span class=w> </span>name:<span class=w> </span>Max<span class=w> </span>Memory<span class=w> </span><span class=o>(</span>MB<span class=o>)</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=w>                  </span>query:<span class=w> </span>sum<span class=o>(</span>container_memory_rss<span class=o>{</span><span class=nv>name</span><span class=o>=</span>~<span class=s2>&quot;.+&quot;</span><span class=o>})</span><span class=w> </span>by<span class=w> </span><span class=o>(</span>name<span class=o>)</span>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=w>                  </span>step:<span class=w> </span><span class=m>10</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=w>                  </span>label:<span class=w> </span>name
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=w>                  </span>statistic:<span class=w> </span>max
</span><span id=__span-3-19><a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=w>                  </span>multiplier:<span class=w> </span><span class=m>0</span>.000001
</span></code></pre></div> The two queries above will be listed in the generated report as “Endorse Time (s)” and “Max Memory (MB)” respectively:</p> <ul> <li><em>Endorse Time (s)</em>: Runs the listed query with a step size of 1; filters on return tags within the Prometheus query response using the <code>instance</code> label; exclude the result if the instance value does not regex match any of the string values provided in the <code>include</code> array; if the instance does match an include option, then determine the average of all return results and return this value to be reported under “Endorse Time (s)”.</li> <li><em>Max Memory (MB)</em>: Runs the listed query with a step size of 10; filter return tags within the Prometheus query response using the <code>name</code> label; exclude the result if the instance value does not regex match any of the string values provided in the <code>include</code> array; if the instance does match an include option, then determine the maximum of all return results; multiply by the provided multiplier and return this value to be reported under “Max Memory (MB)”.</li> </ul> <p>Returned components with labels that pass a regex test against the <code>include</code> array items, will be included within the report; all others will be omitted.</p> <h4 id=basic-auth>Basic Auth<a class=headerlink href=#basic-auth title="Permanent link">&para;</a></h4> <p>It is possible to use a Prometheus Server that is secured via basic authentication through provision of a username and password as runtime parameters, under the flags:</p> <ul> <li>caliper-auth-prometheus-username</li> <li>caliper-auth-prometheus-password</li> </ul> <p>These will be used to augment the configuration file based URL prior to making a connection.</p> <h2 id=transaction>Transaction<a class=headerlink href=#transaction title="Permanent link">&para;</a></h2> <p>Transaction monitors are used by Caliper workers to act on the completion of transactions. They are used internally to aggregate and dispatch transaction statistics to the manager process to enable transaction statistics aggregation for progress reporting via the default transaction monitor, and report generation.</p> <p>The default transaction monitor, used for progress reporting by consuming information from the internal transaction monitor, may be updated through configuration file settings:</p> <ul> <li><code>caliper-progress-reporting-enabled</code>: boolean flag to enable progress reporting, default true</li> <li> <p><code>caliper-progress-reporting-interval</code>: numeric value to set the update frequency, in milliseconds (default 5000) Additional transaction monitoring modules include:</p> </li> <li> <p>logging</p> </li> <li>prometheus-push</li> </ul> <p>One or more transaction modules may be specified by naming them as modules with an accompanying options block in an array format under monitors.transaction.</p> <h3 id=logging>Logging<a class=headerlink href=#logging title="Permanent link">&para;</a></h3> <p>The <code>logging</code> transaction module is used to log aggregated transaction statistics at the completion of a test round, within the worker. The following specifies the use of a <code>logging</code> transaction monitor. No options are required by the module.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>monitors:
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>    </span>transaction:
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span>-<span class=w> </span>module:<span class=w> </span>logging
</span></code></pre></div> <h3 id=prometheus>Prometheus<a class=headerlink href=#prometheus title="Permanent link">&para;</a></h3> <p>The <code>prometheus</code> transaction module is used to expose current transaction statistics of all workers to a Prometheus server, via a scrape mechanism. The module exposes the following metrics:</p> <ul> <li>caliper_tx_submitted (counter)</li> <li>caliper_tx_finished (counter)</li> <li>caliper_tx_e2e_latency (histogram)</li> </ul> <p>The following specifies the use of a <code>prometheus</code> transaction module that exposes metrics for collection on the default port (3000) and the default scrape URL (<code>/metrics</code>).</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>monitors:
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>    </span>transaction:
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span>-<span class=w> </span>module:<span class=w> </span>prometheus
</span></code></pre></div> <p>If operating with process based workers, each worker will increment the default (or overridden) port with their 0 based index, thereby exposing metrics for each worker on different ports.</p> <p>It is the responsibility of the user to configure a Prometheus server that correctly targets the exposed URLS through a correctly specified <a href=https://prometheus.io/docs/prometheus/latest/configuration/configuration/ >configuration file</a>.</p> <p>Options comprise:</p> <ul> <li>metricPath: override for the metrics path to be scraped (default /metrics).</li> <li>scrapePort: override for the port to be used when configuring the scrape sever (default 3000).</li> <li>processMetricCollectInterval: time interval for default metrics collection, enabled when present</li> <li>defaultLabels: object of key:value pairs to augment the default labels applied to the exposed metrics during collection.</li> <li>histogramBuckets: override for the histogram to be used for collection of caliper_tx_e2e_latency<ul> <li>explicit: direct pass through of user defined bucket</li> <li>linear: use a linear bucket with user defined start, width and count parameters<ul> <li>start: start bucket size</li> <li>width: bucket width</li> <li>count: number of buckets to create</li> </ul> </li> <li>exponential<ul> <li>start: start bucket size</li> <li>factor: bucket factor</li> <li>count: number of buckets to create</li> </ul> </li> </ul> </li> </ul> <h3 id=prometheus-push-gateway>Prometheus Push Gateway<a class=headerlink href=#prometheus-push-gateway title="Permanent link">&para;</a></h3> <p>The <code>prometheus-push</code> transaction module is used to expose current transaction statistics of all workers to a Prometheus server, via a push gateway. The module exposes the following metrics:</p> <ul> <li>caliper_tx_submitted (counter)</li> <li>caliper_tx_finished (counter)</li> <li>caliper_tx_e2e_latency (histogram)</li> </ul> <p>The following specifies the use of a <code>prometheus-push</code> transaction module that sends current transaction statistics to a push gateway located at <code>http://localhost:9091</code> at 5 second intervals.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>monitors:
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span>transaction:
</span><span id=__span-6-3><a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=w>    </span>-<span class=w> </span>module:<span class=w> </span>prometheus-push
</span><span id=__span-6-4><a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>      </span>options:
</span><span id=__span-6-5><a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=w>        </span>pushInterval:<span class=w> </span><span class=m>5000</span>
</span><span id=__span-6-6><a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=w>        </span>pushUrl:<span class=w> </span><span class=s2>&quot;http://localhost:9091&quot;</span>
</span></code></pre></div> <p>Options comprise:</p> <ul> <li>pushInterval: push interval in milliseconds</li> <li>pushUrl: URL for Prometheus Push Gateway</li> <li>processMetricCollectInterval: time interval for default metrics collection, enabled when present</li> <li>defaultLabels: object of key:value pairs to augment the default labels applied to the exposed metrics during collection.</li> <li>histogramBuckets: override for the histogram to be used for collection of caliper_tx_e2e_latency<ul> <li>explicit: direct pass through of user defined bucket</li> <li>linear: use a linear bucket with user defined start, width and count parameters<ul> <li>start: start bucket size</li> <li>width: bucket width</li> <li>count: number of buckets to create</li> </ul> </li> <li>exponential<ul> <li>start: start bucket size</li> <li>factor: bucket factor</li> <li>count: number of buckets to create</li> </ul> </li> </ul> </li> </ul> <p>Use of a <code>prometheus-push</code> transaction module is predicated on the availability and use of a Prometheus Push Gateway that is available as a scrape target to Prometheus.</p> <h4 id=basic-auth_1>Basic Auth<a class=headerlink href=#basic-auth_1 title="Permanent link">&para;</a></h4> <p>It is possible to use a Prometheus Push Gateway that is secured via basic authentication through provision of a username and password as runtime parameters, under the flags:</p> <ul> <li>caliper-auth-prometheuspush-username</li> <li>caliper-auth-prometheuspush-password</li> </ul> <p>These will be used to augment the configuration file based URL prior to making a connection.</p> <h3 id=grafana-visualization>Grafana Visualization<a class=headerlink href=#grafana-visualization title="Permanent link">&para;</a></h3> <p>Grafana is an analytics platform that may be used to query and visualize metrics collected by Prometheus. Caliper clients make the following metrics available, either via a direct scrape or indirectly via a Prometheus Push Gateway:</p> <ul> <li>caliper_tx_submitted (counter)</li> <li>caliper_tx_finished (counter)</li> <li>caliper_tx_e2e_latency (histogram)</li> </ul> <p>Each of the above are tagged with the following default labels:</p> <ul> <li>roundLabel: the current test round label</li> <li>roundIndex: the current test round index</li> <li>workerIndex: the zero based worker index that is sending the information</li> </ul> <p>We are currently working on a Grafana dashboard to give you immediate access to the metrics published above, but in the interim please feel free to create custom queries to view the above metrics that are accessible in real time.</p> <h2 id=resource-charting>Resource Charting<a class=headerlink href=#resource-charting title="Permanent link">&para;</a></h2> <p>The data from each monitor is capable of being output in chart form within the generated Caliper report, via an option within the benchmark configuration file for each monitor. In addition to tabulated data for resource monitors, Caliper currently supports rendering of the following charts using <code>charting.js</code>:</p> <ul> <li>horizontal bar</li> <li>polar area</li> </ul> <p>Charting is an option that is available for each resource monitor, and the specification of the charting to be produced is specified under each monitor type within the benchmark configuration file, under a charting block. It is possible to specify multiple charting options for a single resource monitor.</p> <p>A chart will contain data for all items that are being tracked by the monitor; it is only possible to filter on the metrics that are to be charted. The following declares the <code>charting</code> block that is valid for the listed monitors:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>charting:
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>  </span>bar:
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>  </span>-<span class=w> </span>metrics:<span class=w> </span><span class=o>[</span>all<span class=w> </span><span class=p>|</span><span class=w> </span>&lt;sting<span class=w> </span>list&gt;<span class=o>]</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>  </span>polar:
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>  </span>-<span class=w> </span>metrics:<span class=w> </span><span class=o>[</span>all<span class=w> </span><span class=p>|</span><span class=w> </span>&lt;sting<span class=w> </span>list&gt;<span class=o>]</span>
</span></code></pre></div> <p>If the <code>all</code> option is specified, then a chart will be output for each metric and include all monitored items within each chart. It is possible to filter on metrics by providing a comma separated list. The provided list is matched against metrics using a string comparison, and so it is only required to provide the initial part of the required match. The following declares a charting block that specifies a bar chart for all available metrics, and a polar chart for only metric0 and metric1:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a>charting:
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a>  bar:
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a>  - metrics: [all]
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>  polar:
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a>  - metrics: [metric0, metric1]
</span></code></pre></div> <h3 id=process-charting>Process Charting<a class=headerlink href=#process-charting title="Permanent link">&para;</a></h3> <p>he process resource monitor exposes the following metrics: Memory(max), Memory(avg), CPU%(max), CPU%(avg).</p> <p>The following declares the monitoring of any running processes named caliper.js, with charting options specified to produce bar charts for all available metrics. Charts will be produced containing data from all monitored processes:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>monitors:
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>  </span>resource:
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>  </span>-<span class=w> </span>module:<span class=w> </span>process
</span><span id=__span-9-4><a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>    </span>options:
</span><span id=__span-9-5><a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>      </span>interval:<span class=w> </span><span class=m>3</span>
</span><span id=__span-9-6><a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=w>      </span>processes:<span class=w> </span><span class=o>[{</span><span class=w> </span>command:<span class=w> </span><span class=s1>&#39;node&#39;</span>,<span class=w> </span>arguments:<span class=w> </span><span class=s1>&#39;caliper.js&#39;</span>,<span class=w> </span>multiOutput:<span class=w> </span><span class=s1>&#39;avg&#39;</span><span class=w> </span><span class=o>}]</span>
</span><span id=__span-9-7><a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=w>      </span>charting:
</span><span id=__span-9-8><a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=w>        </span>bar:
</span><span id=__span-9-9><a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=w>          </span>metrics:<span class=w> </span><span class=o>[</span>all<span class=o>]</span>
</span></code></pre></div> <h3 id=docker-charting>Docker Charting<a class=headerlink href=#docker-charting title="Permanent link">&para;</a></h3> <p>The docker resource monitor exposes the following metrics: Memory(max), Memory(avg), CPU%(max), CPU%(avg), Traffic In, Traffic Out, Disc Read, Disc Write.</p> <p>The following declares the monitoring of all local docker containers, with charting options specified to produce bar charts for <code>Memory(avg)</code> and <code>CPU%(avg)</code>, and polar charts for all metrics. Charts will be produced containing data from all monitored containers:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>monitors:
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span>resource:
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span>-<span class=w> </span>module:<span class=w> </span>docker
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>    </span>options:
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>      </span>interval:<span class=w> </span><span class=m>5</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>      </span>containers:
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>      </span>-<span class=w> </span>all
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=w>      </span>charting:
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=w>        </span>bar:
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=w>          </span>metrics:<span class=w> </span><span class=o>[</span>Memory<span class=o>(</span>avg<span class=o>)</span>,<span class=w> </span>CPU%<span class=o>(</span>avg<span class=o>)]</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=w>        </span>polar:
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=w>          </span>metrics:<span class=w> </span><span class=o>[</span>all<span class=o>]</span>
</span></code></pre></div> <h3 id=prometheus-charting>Prometheus Charting<a class=headerlink href=#prometheus-charting title="Permanent link">&para;</a></h3> <p>The Prometheus monitor enables user definition of all metrics within the configuration file.</p> <p>The following declares the monitoring of two user defined metrics <code>Endorse Time(s)</code> and <code>Max Memory(MB)</code>. Charting options are specified to produce polar charts filtered on the metric <code>Max Memory (MB)</code>, and bar charts of all user defined metrics.</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>monitors:
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>    </span>resource:
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>    </span>-<span class=w> </span>module:<span class=w> </span>prometheus
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>      </span>options:
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>        </span>url:<span class=w> </span><span class=s2>&quot;http://localhost:9090&quot;</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>        </span>metrics:
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=w>            </span>include:<span class=w> </span><span class=o>[</span>dev.*,<span class=w> </span>couch,<span class=w> </span>peer,<span class=w> </span>orderer<span class=o>]</span>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=w>            </span>queries:
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=w>                </span>-<span class=w> </span>name:<span class=w> </span>Endorse<span class=w> </span>Time<span class=w> </span><span class=o>(</span>s<span class=o>)</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=w>                  </span>query:<span class=w> </span>rate<span class=o>(</span>endorser_propsal_duration_sum<span class=o>{</span><span class=nv>chaincode</span><span class=o>=</span><span class=s2>&quot;marbles:v0&quot;</span><span class=o>}[</span>1m<span class=o>])</span>/rate<span class=o>(</span>endorser_propsal_duration_count<span class=o>{</span><span class=nv>chaincode</span><span class=o>=</span><span class=s2>&quot;marbles:v0&quot;</span><span class=o>}[</span>1m<span class=o>])</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a><span class=w>                  </span>step:<span class=w> </span><span class=m>1</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=w>                  </span>label:<span class=w> </span>instance
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a><span class=w>                  </span>statistic:<span class=w> </span>avg
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a><span class=w>                </span>-<span class=w> </span>name:<span class=w> </span>Max<span class=w> </span>Memory<span class=w> </span><span class=o>(</span>MB<span class=o>)</span>
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a><span class=w>                  </span>query:<span class=w> </span>sum<span class=o>(</span>container_memory_rss<span class=o>{</span><span class=nv>name</span><span class=o>=</span>~<span class=s2>&quot;.+&quot;</span><span class=o>})</span><span class=w> </span>by<span class=w> </span><span class=o>(</span>name<span class=o>)</span>
</span><span id=__span-11-16><a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a><span class=w>                  </span>step:<span class=w> </span><span class=m>10</span>
</span><span id=__span-11-17><a id=__codelineno-11-17 name=__codelineno-11-17 href=#__codelineno-11-17></a><span class=w>                  </span>label:<span class=w> </span>name
</span><span id=__span-11-18><a id=__codelineno-11-18 name=__codelineno-11-18 href=#__codelineno-11-18></a><span class=w>                  </span>statistic:<span class=w> </span>max
</span><span id=__span-11-19><a id=__codelineno-11-19 name=__codelineno-11-19 href=#__codelineno-11-19></a><span class=w>                  </span>multiplier:<span class=w> </span><span class=m>0</span>.000001
</span><span id=__span-11-20><a id=__codelineno-11-20 name=__codelineno-11-20 href=#__codelineno-11-20></a><span class=w>        </span>charting:
</span><span id=__span-11-21><a id=__codelineno-11-21 name=__codelineno-11-21 href=#__codelineno-11-21></a><span class=w>          </span>polar:
</span><span id=__span-11-22><a id=__codelineno-11-22 name=__codelineno-11-22 href=#__codelineno-11-22></a><span class=w>            </span>metrics:<span class=w> </span><span class=o>[</span>Max<span class=w> </span>Memory<span class=w> </span><span class=o>(</span>MB<span class=o>)]</span>
</span><span id=__span-11-23><a id=__codelineno-11-23 name=__codelineno-11-23 href=#__codelineno-11-23></a><span class=w>          </span>bar:
</span><span id=__span-11-24><a id=__codelineno-11-24 name=__codelineno-11-24 href=#__codelineno-11-24></a><span class=w>            </span>metrics:<span class=w> </span><span class=o>[</span>all<span class=o>]</span>
</span></code></pre></div> <h2 id=license>License<a class=headerlink href=#license title="Permanent link">&para;</a></h2> <p>The Caliper codebase is released under the <a href=https://hyperledger.github.io/caliper/v0.5.0/general/license/ >Apache 2.0 license</a>. Any documentation developed by the Caliper Project is licensed under the Creative Commons Attribution 4.0 International License. You may obtain a copy of the license, titled CC-BY-4.0, at <a href=http://creativecommons.org/licenses/by/4.0/ >http://creativecommons.org/licenses/by/4.0/</a>.</p> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../rate-controllers/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Rate Controllers"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Rate Controllers </div> </div> </a> <a href=../caliper-messengers/ class="md-footer__link md-footer__link--next" aria-label="Next: Messengers"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Messengers </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.tabs.link", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.fe8b6f2b.min.js></script> </body> </html>